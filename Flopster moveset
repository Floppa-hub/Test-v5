game:GetService("StarterGui"):SetCore("SendNotification",{
Title = "Power Surges Within You...",
Text = "now u like dumplings..?", 

Button1 = "Ok",
Button2 = "Stfu nig-",
Duration = 30 
})

-- Utility function to set tool names
local function setToolName(slot, newName)
    local player = game.Players.LocalPlayer
    local playerGui = player.PlayerGui
    local hotbar = playerGui:FindFirstChild("Hotbar")
    local backpack = hotbar and hotbar:FindFirstChild("Backpack")
    local hotbarFrame = backpack and backpack:FindFirstChild("Hotbar")
    local baseButton = hotbarFrame and hotbarFrame:FindFirstChild(slot)

    if baseButton then
        local ToolName = baseButton:FindFirstChild("ToolName")
        if ToolName then
            ToolName.Text = newName
        end
    end
end

-- Function to handle GUI updates for the Ult Bar
local function updateHealthText(newText)
    local player = game.Players.LocalPlayer
    local playerGui = player:WaitForChild("PlayerGui")
    local screenGui = playerGui:FindFirstChild("ScreenGui")
    
    if screenGui then
        local magicHealthFrame = screenGui:FindFirstChild("MagicHealth")
        if magicHealthFrame then
            local textLabel = magicHealthFrame:FindFirstChild("TextLabel")
            if textLabel then
                textLabel.Text = newText
            end
        end
    end
end

-- Function to handle animations
local function onAnimationPlayed(animationTrack)
    local animationId = tonumber(animationTrack.Animation.AnimationId:match("%d+"))
    
    -- List of animations and their replacements
    local animationReplacements = {
        [14721837245] = "rbxassetid://17838006839",  -- Ult Move 1
        [12832505612] = "rbxassetid://13643152947",  -- Ult Move 2
        [13083332742] = "rbxassetid://14809836765",  -- Ult Move 3
        [13146710762] = "rbxassetid://11365563255",  -- Ult Move 4
    }

    local replacementId = animationReplacements[animationId]
    if replacementId then
        -- Stop all animations
        for _, animTrack in pairs(game.Players.LocalPlayer.Character.Humanoid:GetPlayingAnimationTracks()) do
            animTrack:Stop()
        end
        
        -- Play replacement animation
        local anim = Instance.new("Animation")
        anim.AnimationId = replacementId
        local newAnimTrack = game.Players.LocalPlayer.Character.Humanoid:LoadAnimation(anim)
        newAnimTrack:Play()
        
        -- Adjust animation settings
        newAnimTrack:AdjustSpeed(1)
        newAnimTrack.TimePosition = 0
    end
end

-- Connect function to AnimationPlayed event
local humanoid = game.Players.LocalPlayer.Character:WaitForChild("Humanoid")
humanoid.AnimationPlayed:Connect(onAnimationPlayed)

-- Function to handle BodyVelocity adjustments
local function onBodyVelocityAdded(bodyVelocity)
    if bodyVelocity:IsA("BodyVelocity") then
        bodyVelocity.Velocity = Vector3.new(bodyVelocity.Velocity.X, 0, bodyVelocity.Velocity.Z)
    end
end

-- Monitor existing and new BodyVelocity instances
local character = game.Players.LocalPlayer.Character
for _, descendant in pairs(character:GetDescendants()) do
    onBodyVelocityAdded(descendant)
end

character.DescendantAdded:Connect(onBodyVelocityAdded)

-- Handle new character creation
game.Players.LocalPlayer.CharacterAdded:Connect(function(newCharacter)
    character = newCharacter
    for _, descendant in pairs(character:GetDescendants()) do
        onBodyVelocityAdded(descendant)
    end
end)
--move and ult names
local player = game.Players.LocalPlayer
local playerGui = player.PlayerGui
local hotbar = playerGui:FindFirstChild("Hotbar")
local backpack = hotbar:FindFirstChild("Backpack")
local hotbarFrame = backpack:FindFirstChild("Hotbar")
local baseButton = hotbarFrame:FindFirstChild("1").Base
local ToolName = baseButton.ToolName
ToolName.Text = "DUMPLING BARRAGE"
local player = game.Players.LocalPlayer
local playerGui = player.PlayerGui
local hotbar = playerGui:FindFirstChild("Hotbar")
local backpack = hotbar:FindFirstChild("Backpack")
local hotbarFrame = backpack:FindFirstChild("Hotbar")
local baseButton = hotbarFrame:FindFirstChild("2").Base
local ToolName = baseButton.ToolName
ToolName.Text = "FURNACE WITH DUMPLINGS"
local player = game.Players.LocalPlayer
local playerGui = player.PlayerGui
local hotbar = playerGui:FindFirstChild("Hotbar")
local backpack = hotbar:FindFirstChild("Backpack")
local hotbarFrame = backpack:FindFirstChild("Hotbar")
local baseButton = hotbarFrame:FindFirstChild("3").Base
local ToolName = baseButton.ToolName
ToolName.Text = "HOT DUMPLING"
local player = game.Players.LocalPlayer
local playerGui = player.PlayerGui
local hotbar = playerGui:FindFirstChild("Hotbar")
local backpack = hotbar:FindFirstChild("Backpack")
local hotbarFrame = backpack:FindFirstChild("Hotbar")
local baseButton = hotbarFrame:FindFirstChild("4").Base
local ToolName = baseButton.ToolName
ToolName.Text = "DUMPLING KICK"
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local function findGuiAndSetText()
    local screenGui = playerGui:FindFirstChild("ScreenGui")
    if screenGui then
        local magicHealthFrame = screenGui:FindFirstChild("MagicHealth")
        if magicHealthFrame then
            local textLabel = magicHealthFrame:FindFirstChild("TextLabel")
            if textLabel then
                textLabel.Text = "AWAKENED FLOPPA"
            end
        end
    end
end
playerGui.DescendantAdded:Connect(findGuiAndSetText)
findGuiAndSetText()
--[[Animations]]
--[[Move 1]]
local animationId = 12534735382
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local function onAnimationPlayed(animationTrack)
    if animationTrack.Animation.AnimationId == "rbxassetid://" .. animationId then
local p = game.Players.LocalPlayer
local Humanoid = p.Character:WaitForChild("Humanoid")
for _, animTrack in pairs(Humanoid:GetPlayingAnimationTracks()) do
    animTrack:Stop()
end
local AnimAnim = Instance.new("Animation")
AnimAnim.AnimationId = "rbxassetid://12460977270"
local Anim = Humanoid:LoadAnimation(AnimAnim)
local startTime = 0
Anim:Play()
Anim:AdjustSpeed(0)
Anim.TimePosition = startTime
Anim:AdjustSpeed(1)
local final2 = game.ReplicatedStorage.Resources.KJEffects["KJWallCombo"].FinalImpact.Origin:Clone()
final2.Parent = game.Players.LocalPlayer.Character["Right Arm"]
    for _, child in ipairs(final2:GetChildren()) do
        if child:IsA("ParticleEmitter") then -- Check if the child is a ParticleEmitter
            child:Emit(1) -- Emit 20 particles
        end
    end
local final3 = game.ReplicatedStorage.Resources.KJEffects["KJWallCombo"].FinalImpact.Attachment:Clone()
final3.Parent = game.Players.LocalPlayer.Character["Right Arm"]
    for _, child in ipairs(final3:GetChildren()) do
        if child:IsA("ParticleEmitter") then -- Check if the child is a ParticleEmitter
            child:Emit(1) -- Emit 20 particles
        end
    end
local final4 = game.ReplicatedStorage.Resources.KJEffects["KJWallCombo"].FinalImpact.Attachment:Clone()
final4.Parent = game.Players.LocalPlayer.Character["Right Arm"]
    for _, child in ipairs(final4:GetChildren()) do
        if child:IsA("ParticleEmitter") then -- Check if the child is a ParticleEmitter
            child:Emit(1) -- Emit 20 particles
        end
    end
local final5 = game.ReplicatedStorage.Resources.KJEffects["KJWallCombo"].FinalImpact.Attachment:Clone()
final5.Parent = game.Players.LocalPlayer.Character["Right Arm"]
    for _, child in ipairs(final5:GetChildren()) do
        if child:IsA("ParticleEmitter") then -- Check if the child is a ParticleEmitter
            child:Emit(1) -- Emit 20 particles
        end
    end
local final6 = game.ReplicatedStorage.Resources.KJEffects["KJWallCombo"].FinalImpact.Attachment:Clone()
final6.Parent = game.Players.LocalPlayer.Character["Right Arm"]
    for _, child in ipairs(final6:GetChildren()) do
        if child:IsA("ParticleEmitter") then -- Check if the child is a ParticleEmitter
            child:Emit(1) -- Emit 20 particles
        end
    end
    end
end
--[[END OF MOVE 1 ANIM]]
--[[Move 2]]
humanoid.AnimationPlayed:Connect(onAnimationPlayed)
local animationId = 12502664044
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local function onAnimationPlayed(animationTrack)
    if animationTrack.Animation.AnimationId == "rbxassetid://" .. animationId then
local p = game.Players.LocalPlayer
local Humanoid = p.Character:WaitForChild("Humanoid")
for _, animTrack in pairs(Humanoid:GetPlayingAnimationTracks()) do
    animTrack:Stop()
end
local AnimAnim = Instance.new("Animation")
AnimAnim.AnimationId = "rbxassetid://17838006839"
local Anim = Humanoid:LoadAnimation(AnimAnim)
local startTime = 0
Anim:Play()
Anim:AdjustSpeed(1)
Anim.TimePosition = startTime
Anim:AdjustSpeed(1)

local boom1 = game.ReplicatedStorage.Resources.KJEffects["spinnerthing"].spinningpartysmoke:Clone()
boom1.Parent = game.Players.LocalPlayer.Character["Torso"]
    for _, child in ipairs(boom1:GetChildren()) do
        if child:IsA("ParticleEmitter") then -- Check if the child is a ParticleEmitter
            child:Emit(3) -- Emit 20 particles
        end
    end
local collateral1 = game.ReplicatedStorage.Resources.KJEffects["spinnyweenyspinner"].Attachment:Clone()
collateral1.Parent = game.Players.LocalPlayer.Character["HumanoidRootPart"]
    for _, child in ipairs(collateral1:GetChildren()) do
        if child:IsA("ParticleEmitter") then -- Check if the child is a ParticleEmitter
            child:Emit(2) -- Emit 20 particles
        end
    end
local collateral2 = game.ReplicatedStorage.Resources.KJEffects["spinnyweenyspinner"].Emit:Clone()
collateral2.Parent = game.Players.LocalPlayer.Character["HumanoidRootPart"]
    for _, child in ipairs(collateral2:GetChildren()) do
        if child:IsA("ParticleEmitter") then -- Check if the child is a ParticleEmitter
            child:Emit(2) -- Emit 20 particles
        end
    end
local collateral3 = game.ReplicatedStorage.Resources.KJEffects["spinnerthing"].spinningparty:Clone()
collateral3.Parent = game.Players.LocalPlayer.Character["HumanoidRootPart"]
    for _, child in ipairs(collateral3:GetChildren()) do
        if child:IsA("ParticleEmitter") then -- Check if the child is a ParticleEmitter
            child:Emit(2) -- Emit 20 particles
        end
    end
local collateral4 = game.ReplicatedStorage.Resources.KJEffects["spinnerthing"].spinningpartysmok

    end
end
--[[END OF MOVE 2 ANIM]]
--[[Move 3]]
humanoid.AnimationPlayed:Connect(onAnimationPlayed)
local animationId = 12618271998
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local function onAnimationPlayed(animationTrack)
    if animationTrack.Animation.AnimationId == "rbxassetid://" .. animationId then
local p = game.Players.LocalPlayer
local Humanoid = p.Character:WaitForChild("Humanoid")
for _, animTrack in pairs(Humanoid:GetPlayingAnimationTracks()) do
    animTrack:Stop()
end
local AnimAnim = Instance.new("Animation")
AnimAnim.AnimationId = "rbxassetid://14351441234"
local Anim = Humanoid:LoadAnimation(AnimAnim)
local startTime = 0.3
Anim:Play()
Anim:AdjustSpeed(0)
Anim.TimePosition = startTime
Anim:AdjustSpeed(0.9)
delay(1.8, function()
    Anim:Stop()
end)

local rs = game:GetService("ReplicatedStorage")
local ws = game:GetService("Workspace")
local p = game.Players.LocalPlayer
local char = p.Character
local hrp = char and char:FindFirstChild("HumanoidRootPart")
local cam = game.Workspace.CurrentCamera

if hrp and cam then
    local spinbeam = rs:FindFirstChild("Resources") and rs.Resources:FindFirstChild("KJEffects") and rs.Resources.KJEffects:FindFirstChild("spinbeam")
    if spinbeam then
        local c = spinbeam:Clone()

        -- Position the clone where the player is looking
        c.CFrame = CFrame.new(hrp.Position + cam.CFrame.LookVector * 5)  -- Adjust the multiplier for distance

        local beam2 = c:FindFirstChild("beam2")
        if beam2 then
            local beam = beam2:FindFirstChild("Beam")
            if beam then
                beam.Enabled = true
            end
        end

        local t = ws:FindFirstChild("Thrown") or Instance.new("Folder", ws)
        t.Name = "Thrown"
        c.Parent = t

        -- Destroy the cloned object after 1 second
        wait(1)
        c:Destroy()
    end
end

    end
end
--[[END OF MOVE 3 ANIM]]
--[[Move 4]]
humanoid.AnimationPlayed:Connect(onAnimationPlayed)
local animationId = 12684185971
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local function onAnimationPlayed(animationTrack)
    if animationTrack.Animation.AnimationId == "rbxassetid://" .. animationId then
local p = game.Players.LocalPlayer
local Humanoid = p.Character:WaitForChild("Humanoid")
for _, animTrack in pairs(Humanoid:GetPlayingAnimationTracks()) do
    animTrack:Stop()
end
local AnimAnim = Instance.new("Animation")
AnimAnim.AnimationId = "rbxassetid://18716650993"
local Anim = Humanoid:LoadAnimation(AnimAnim)
local startTime = 0
Anim:Play()
Anim:AdjustSpeed(0)
Anim.TimePosition = startTime
Anim:AdjustSpeed(1)

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer
local character = localPlayer.Character
local head = character:FindFirstChild("Head")
local torso = character:FindFirstChild("Torso")

if head and torso then
    local final1 = ReplicatedStorage.Resources.Sorcerer["WallFX"].Final.At:Clone()
    final1.Parent = head
    for _, child in ipairs(final1:GetChildren()) do
        if child:IsA("ParticleEmitter") then
            child:Emit(50)
        end
    end

    local final4 = ReplicatedStorage.Resources.Sorcerer["WallFX"].Final.Attachment:Clone()
    final4.Parent = torso
    for _, child in ipairs(final4:GetChildren()) do
        if child:IsA("ParticleEmitter") then
            child:Emit(1)
        end
    end
end

    end
end
--[[END OF MOVE 4 ANIM]]
--[[Wall combo]]
humanoid.AnimationPlayed:Connect(onAnimationPlayed)
local animationId = 15943915877
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local function onAnimationPlayed(animationTrack)
    if animationTrack.Animation.AnimationId == "rbxassetid://" .. animationId then
local p = game.Players.LocalPlayer
local Humanoid = p.Character:WaitForChild("Humanoid")
for _, animTrack in pairs(Humanoid:GetPlayingAnimationTracks()) do
    animTrack:Stop()
end
local AnimAnim = Instance.new("Animation")
AnimAnim.AnimationId = "rbxassetid://16310343179"
local Anim = Humanoid:LoadAnimation(AnimAnim)
local startTime = 0.05
Anim:Play()
Anim:AdjustSpeed(0)
Anim.TimePosition = startTime
Anim:AdjustSpeed(1)

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer
local character = localPlayer.Character
local head = character:FindFirstChild("Head")
local torso = character:FindFirstChild("Torso")

if head and torso then
    local final1 = ReplicatedStorage.Resources.Sorcerer["WallFX"].Final.At:Clone()
    final1.Parent = head
    for _, child in ipairs(final1:GetChildren()) do
        if child:IsA("ParticleEmitter") then
            child:Emit(50)
        end
    end

    local final4 = ReplicatedStorage.Resources.Sorcerer["WallFX"].Final.Attachment:Clone()
    final4.Parent = torso
    for _, child in ipairs(final4:GetChildren()) do
        if child:IsA("ParticleEmitter") then
            child:Emit(1)
        end
    end
end

    end
end
--[[END OF WALL COMBO ANIM]]
--[[Ult Activation]]
humanoid.AnimationPlayed:Connect(onAnimationPlayed)
local animationId = 12772543293
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local function onAnimationPlayed(animationTrack)
    if animationTrack.Animation.AnimationId == "rbxassetid://" .. animationId then
local p = game.Players.LocalPlayer
local Humanoid = p.Character:WaitForChild("Humanoid")
for _, animTrack in pairs(Humanoid:GetPlayingAnimationTracks()) do
    animTrack:Stop()
end
local AnimAnim = Instance.new("Animation")
AnimAnim.AnimationId = "rbxassetid://14611879113"
local Anim = Humanoid:LoadAnimation(AnimAnim)
local startTime = 0
Anim:Play()
Anim:AdjustSpeed(0)
Anim.TimePosition = startTime
Anim:AdjustSpeed(1)

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer
local character = localPlayer.Character
local head = character:FindFirstChild("Head")
local torso = character:FindFirstChild("Torso")

if head and torso then
    local final1 = ReplicatedStorage.Resources.Sorcerer["WallFX"].Final.At:Clone()
    final1.Parent = head
    for _, child in ipairs(final1:GetChildren()) do
        if child:IsA("ParticleEmitter") then
            child:Emit(50)
        end
    end

    local final4 = ReplicatedStorage.Resources.Sorcerer["WallFX"].Final.Attachment:Clone()
    final4.Parent = torso
    for _, child in ipairs(final4:GetChildren()) do
        if child:IsA("ParticleEmitter") then
            child:Emit(1)
        end
    end
end

    end
end
--[[END OF ULT ACTIVATION ANIM]]
--[[Dash]]
humanoid.AnimationPlayed:Connect(onAnimationPlayed)
local animationId = 10479335397
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local function onAnimationPlayed(animationTrack)
    if animationTrack.Animation.AnimationId == "rbxassetid://" .. animationId then
local p = game.Players.LocalPlayer
local Humanoid = p.Character:WaitForChild("Humanoid")
for _, animTrack in pairs(Humanoid:GetPlayingAnimationTracks()) do
    animTrack:Stop()
end
local AnimAnim = Instance.new("Animation")
AnimAnim.AnimationId = "rbxassetid://13294790250"
local Anim = Humanoid:LoadAnimation(AnimAnim)
local startTime = 0
Anim:Play()
Anim:AdjustSpeed(0)
Anim.TimePosition = startTime
Anim:AdjustSpeed(1.3)
delay(1.8, function()
    Anim:Stop()
end)
    end
end
--[[END OF DASH ANIM]]
--[[Uppercut]]
humanoid.AnimationPlayed:Connect(onAnimationPlayed)
local animationId = 10503381238
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local function onAnimationPlayed(animationTrack)
    if animationTrack.Animation.AnimationId == "rbxassetid://" .. animationId then
local p = game.Players.LocalPlayer
local Humanoid = p.Character:WaitForChild("Humanoid")
for _, animTrack in pairs(Humanoid:GetPlayingAnimationTracks()) do
    animTrack:Stop()
end
local AnimAnim = Instance.new("Animation")
AnimAnim.AnimationId = "rbxassetid://14900168720"
local Anim = Humanoid:LoadAnimation(AnimAnim)
local startTime = 1.3
Anim:Play()
Anim:AdjustSpeed(0)
Anim.TimePosition = startTime
Anim:AdjustSpeed(0.7)
    end
end
--[[END OF UPPERCUT ANIM]]
--[[Downslam]]
humanoid.AnimationPlayed:Connect(onAnimationPlayed)
local animationId = 10470104242
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local function onAnimationPlayed(animationTrack)
    if animationTrack.Animation.AnimationId == "rbxassetid://" .. animationId then
local p = game.Players.LocalPlayer
local Humanoid = p.Character:WaitForChild("Humanoid")
for _, animTrack in pairs(Humanoid:GetPlay
